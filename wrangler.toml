name = "auth-worker"
main = "src/index.ts"
compatibility_date = "2024-12-01"

[[services]]
binding = "GRPC_PROXY"
service = "cf-grpc-proxy"

[vars]
AUTH_WORKER_ORIGIN = "https://auth.mtamaramu.com"
ALLOWED_REDIRECT_ORIGINS = "https://nuxt-pwa-carins.mtamaramu.com,https://ohishi2.mtamaramu.com,https://items.mtamaramu.com,https://auth.mtamaramu.com"

[observability]
enabled = true
head_sampling_rate = 1

[[routes]]
pattern = "auth.mtamaramu.com"
custom_domain = true

# Secrets (set via `wrangler secret put`):
# GOOGLE_CLIENT_ID
# GOOGLE_CLIENT_SECRET
# OAUTH_STATE_SECRET
